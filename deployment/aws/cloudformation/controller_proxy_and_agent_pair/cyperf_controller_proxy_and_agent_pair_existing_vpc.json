{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "\n    Stack creating a VPC and launch EC2 instances within it.\n    **WARNING** This template creates Amazon EC2 instances.\n    You will be billed for the AWS resources used if you create\n    a stack from this template. **WARNING** This template creates\n    role for the launching/deleting instances/subnets/interfaces.\n    This role will invoke AWSLambdaBasicExecutionRole, please see\n    AWS Documentation for details on AWSLambdaBasicExecutionRole.",
    "Mappings" : {
        "RegionMap" : {
            "us-east-1" : {
                "AMIxAPPLICATION" : "ami-0a7ec40fcd5fa2b5a",
                "AMIxBROKER" : "ami-0c0dd64e6ea117644",
                "AMIxAGENT" : "ami-003f6b132c97deddc",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "18.206.107.24/29",
                "EC2xREGION" : "US East (N. Virginia)",
                "REGIONxTAG" : "US_EAST_1"
            },
            "us-east-2" : {
                "AMIxAPPLICATION" : "ami-059f32c195c136297",
                "AMIxBROKER" : "ami-03ce4c179f8077e6e",
                "AMIxAGENT" : "ami-06ee740153fa2e6e9",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "3.16.146.0/29",
                "EC2xREGION" : "US East (Ohio)",
                "REGIONxTAG" : "US_EAST_2"
            },
            "us-west-1" : {
                "AMIxAPPLICATION" : "ami-05d3d0b9c9b69714a",
                "AMIxBROKER" : "ami-0a0193a5019a1472a",
                "AMIxAGENT" : "ami-00aa3ac8cb3bfa4d1",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "13.52.6.112/29",
                "EC2xREGION" : "US West (N. California)",
                "REGIONxTAG" : "US_WEST_1"
            },
            "us-west-2" : {
                "AMIxAPPLICATION" : "ami-0952a7e2ea81eedea",
                "AMIxBROKER" : "ami-05ad4e4fc10e719e4",
                "AMIxAGENT" : "ami-059e2162ab70e07ee",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "18.237.140.160/29",
                "EC2xREGION" : "US West (Oregon)",
                "REGIONxTAG" : "US_WEST_2"
            },
            "ap-east-1" : {
                "AMIxAPPLICATION" : "ami-00000000000000000",
                "AMIxBROKER" : "ami-00000000000000000",
                "AMIxAGENT" : "ami-00000000000000000",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "18.206.107.24/29",
                "EC2xREGION" : "Asia Pacific (Hong Kong)",		
                "REGIONxTAG" : "AP_EAST_1"
            },
            "ap-south-1" : {
                "AMIxAPPLICATION" : "ami-023641337c2988725",
                "AMIxBROKER" : "ami-0396507f5af6f3cba",
                "AMIxAGENT" : "ami-08a5b8ec4cae8dc3e",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "13.233.177.0/29",
                "EC2xREGION" : "Asia Pacific (Mumbai)",
                "REGIONxTAG" : "AP_SOUTH_1"
            },
            "ap-northeast-2" : {
                "AMIxAPPLICATION" : "ami-0231d8320a97d3190",
                "AMIxBROKER" : "ami-0fd9513a06c1ab5f1",
                "AMIxAGENT" : "ami-00879c26bd018f1ec",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "13.209.1.56/29",
                "EC2xREGION" : "Asia Pacific (Seoul)",
                "REGIONxTAG" : "AP_NORTHEAST_2"
            },
            "ap-southeast-1" : {
                "AMIxAPPLICATION" : "ami-05ec918533890ed8e",
                "AMIxBROKER" : "ami-0d1f51e056a3e622a",
                "AMIxAGENT" : "ami-07a19b460b8d472de",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "3.0.5.32/29",
                "EC2xREGION" : "Asia Pacific (Singapore)",
                "REGIONxTAG" : "AP_SOUTHEAST_1"
            },
            "ap-southeast-2" : {
                "AMIxAPPLICATION" : "ami-0b326d76938d8efbb",
                "AMIxBROKER" : "ami-00d1c13664c375302",
                "AMIxAGENT" : "ami-0ea30918d5e08d353",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "13.239.158.0/29",
                "EC2xREGION" : "Asia Pacific (Sydney)",
                "REGIONxTAG" : "AP_SOUTHEAST_2"
            },
            "ap-northeast-1" : {
                "AMIxAPPLICATION" : "ami-0696ea36fdb067a8f",
                "AMIxBROKER" : "ami-0f159e07065eb2182",
                "AMIxAGENT" : "ami-02868386d7cf3ba24",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "3.112.23.0/29",
                "EC2xREGION" : "Asia Pacific (Tokyo)",
                "REGIONxTAG" : "AP_NORTHEAST_1"
            },
            "ca-central-1" : {
                "AMIxAPPLICATION" : "ami-0c16f2e11d942fcde",
                "AMIxBROKER" : "ami-0eb12630e4e123cea",
                "AMIxAGENT" : "ami-0c7f3150f0409cbf1",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "35.183.92.176/29",
                "EC2xREGION" : "Canada (Central)",
                "REGIONxTAG" : "CA_CENTRAL_1"
            },
            "eu-central-1" : {
                "AMIxAPPLICATION" : "ami-05ea8767ecde8851f",
                "AMIxBROKER" : "ami-0ca95ed64807ff9d6",
                "AMIxAGENT" : "ami-058cde9fe6a6204c9",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "3.120.181.40/29",
                "EC2xREGION" : "EU (Frankfurt)",
                "REGIONxTAG" : "EU_CENTRAL_1"
            },
            "eu-west-1" : {
                "AMIxAPPLICATION" : "ami-0b1410c884b3cd9fd",
                "AMIxBROKER" : "ami-0860bb3f33e5d2bd9",
                "AMIxAGENT" : "ami-07d34fec2baf3102c",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "18.202.216.48/29",
                "EC2xREGION" : "EU (Ireland)",
                "REGIONxTAG" : "EU_WEST_1"
            },
            "eu-west-2" : {
                "AMIxAPPLICATION" : "ami-0984138be2d7b7a2b",
                "AMIxBROKER" : "ami-084f1d73040c14377",
                "AMIxAGENT" : "ami-09d55ac725e933d45",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "3.8.37.24/29",
                "EC2xREGION" : "EU (London)",
                "REGIONxTAG" : "EU_WEST_2"
            },
            "eu-west-3" : {
                "AMIxAPPLICATION" : "ami-07f3d9df3222b2223",
                "AMIxBROKER" : "ami-06a0dbcbe986fa9dc",
                "AMIxAGENT" : "ami-0c24743406c7e3a9c",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "35.180.112.80/29",
                "EC2xREGION" : "EU (Paris)",
                "REGIONxTAG" : "EU_WEST_3"
            },
            "eu-north-1" : {
                "AMIxAPPLICATION" : "ami-00a03ea91e2304573",
                "AMIxBROKER" : "ami-067ac1872f97291e9",
                "AMIxAGENT" : "ami-05719b32ff26829d8",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "13.48.4.200/30",
                "EC2xREGION" : "EU (Stockholm)",
                "REGIONxTAG" : "EU_NORTH_1"
            },
            "me-south-1" : {
                "AMIxAPPLICATION" : "ami-00000000000000000",
                "AMIxBROKER" : "ami-00000000000000000",
                "AMIxAGENT" : "ami-00000000000000000",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "18.206.107.24/29",
                "EC2xREGION" : "Middle East (Bahrain)",		
                "REGIONxTAG" : "ME_SOUTH_1"
            },
            "sa-east-1" : {
                "AMIxAPPLICATION" : "ami-07a3b571f7388a367",
                "AMIxBROKER" : "ami-09c7814ad679f7b0d",
                "AMIxAGENT" : "ami-01e96945c93d88c5f",
                "AMIxLICENSE" : "ami-00000000000000000",
                "EC2xCONNECTxCIDR" : "13.48.4.200/30",
                "EC2xREGION" : "South America (Sao Paulo)",
                "REGIONxTAG" : "SA_EAST_1"
            }
        },
        "VariableMap" : {
            "global" : {
                "OPTIONSxTAG" : "MANUAL",
                "PROJECTxTAG" : "CyPerf",
                "FLOWxLOGxRESOURCExTYPE" : "VPC",
                "FLOWxLOGxTRAFFICxTYPE" : "REJECT"
            }
        }
    },
    "Metadata": {
        "AWS::CloudFormation::Interface": {
            "ParameterGroups": [
                {
                    "Label": {
                        "default": "NETWORK CONFIGURATION"
                    }
                },
                {
                    "Label": {
                        "default": "VPC Configuration"
                    },
                    "Parameters": [
                        "Username",
                        "Project",
                        "VPCCIDR",
                        "AvailabilityZone"
                    ]
                },
                {
                    "Label": {
                        "default": "CyPerf Controller Proxy Configuration"
                    },
                    "Parameters": [
                        "ControllerProxyManagementSubnet",
                        "CyPerfControllerProxySecurityGroup"
                    ]
                },
                {
                    "Label": {
                        "default": "CyPerf Agent Configuration"
                    },
                    "Parameters": [
                        "InstanceTypeForCyPerfAgent",
                        "KeyNameForCyPerfAgent",
                        "AgentControlSubnet",
                        "AgentTestSubnet",
                        "AgentSecurityGroup"
                     ]
                },
                {
                    "Label": {
                        "default": "Security-Group Configuration"
                    },
                    "Parameters": [
                        "AllowedSubnet"
                    ]
                }
            ],
            "ParameterLabels": {
                "AvailabilityZone": {
                    "default": "Availability Zone"
                },
                "InstanceTypeForCyPerfAgent": {
                    "default": "Instance Type for CyPerf Agents"
                },
                "KeyNameForCyPerfAgent": {
                    "default": "SSH Key"
                },
                "ControllerProxyManagementSubnet": {
                    "default": "Management Subnet for CyPerf Controller Proxy"
                },
                "AgentControlSubnet": {
                    "default": "Control Subnet for CyPerf Agents"
                },
                "AgentTestSubnet": {
                    "default": "Test Subnet for CyPerf Agents"
                },
                "AllowedSubnet": {
                    "default": "Allowed Subnet for Security Group"
                },
                "CyPerfControllerProxySecurityGroup": {
                    "default": "Security Group of CyPerf Contoller Proxy"
                },
                "AgentSecurityGroup": {
                    "default": "Security Group of CyPerf Agent"
                },
                "VPCCIDR": {
                    "default": "VPC"
                }
            }
        }
    },
    "Outputs": {
        "CyPerfControllerProxyINstanceDNS": {
            "Description": "DNS name of CyPerf Controller Proxy instance",
            "Value": {
                "Fn::Join": [
                    "",
                    [
                        {
                            "Fn::GetAtt": [
                                "CyPerfControllerProxy",
                                "PublicDnsName"
                            ]
                        }
                    ]
                ]
            }
        }
    },
    "Parameters": {
        "AvailabilityZone": {
            "Default": "<Select preferred availability zone from drop down list",
            "Description": "Preffered Availability Zone",
            "Type": "AWS::EC2::AvailabilityZone::Name"
        },
        "InstanceTypeForCyPerfAgent": {
            "AllowedValues": [
                "c4.2xlarge",
                "c5n.9xlarge"
            ],
            "Default": "c4.2xlarge",
            "Description": "CyPerf instance type",
            "Type": "String"
        },        
        "CyPerfControllerProxySecurityGroup": {
            "Default": "<Select CyPerf Controller proxy security group from drop down list>",
            "Description": "Preferred Existing Security Group subnet for CyPerf Controller",
            "Type": "AWS::EC2::SecurityGroup::Id"
        },
        "AgentSecurityGroup": {
            "Default": "<Select CyPerf Agent security group from drop down list>",
            "Description": "Preferred Existing Security Group for CyPerf Agent",
            "Type": "AWS::EC2::SecurityGroup::Id"
        },
        "KeyNameForCyPerfAgent": {
            "ConstraintDescription": "must be the name of an existing EC2 KeyPair",
            "Default": "CyPerf-keypair",
            "Description": "Name of an existing EC2 KeyPair to enable SSH access to the CyPerf instances",
            "Type": "AWS::EC2::KeyPair::KeyName"
        },
        "AgentControlSubnet": {
            "Default": "<Select Control Subnet for CyPerf Agents from drop down list>",
            "Description": "Preferred Existing Control subnet for CyPerf Agent",
            "Type": "AWS::EC2::Subnet::Id"
        },
        "AgentTestSubnet": {
            "Default": "<Select Test Subnet for CyPerf Agents from drop down list>",
            "Description": "Preferred Existing Test subnet for CyPerf Agent",
            "Type": "AWS::EC2::Subnet::Id"
        },
        "ControllerProxyManagementSubnet": {
            "Default": "<Select Management Subnet for CyPerf Controller Proxy from drop down list>",
            "Description": "Preferred Existing Management subnet for CyPerf Controller Proxy. This subnet is attached to CyPerf Controller Proxy",
            "Type": "AWS::EC2::Subnet::Id"
        },
        "Project": {
            "Default": "CyPerf-AWS",
            "Description": "Project Name",
            "Type": "String"
        },
        "Username": {
            "Default": "<UserName>@<domainname>",
            "Description": "Team or Individual email id responsible for the Stack",
            "Type": "String"
        },
        "VPCCIDR": {
            "Default": "<Select VPC from drop down list>",
            "Description": "Preferred Existing VPC",
            "Type": "AWS::EC2::VPC::Id"
        }
    },
    "Resources": {
        "EC2IfaceRole": {
            "Properties": {
                "AssumeRolePolicyDocument": {
                    "Statement": [
                        {
                            "Action": "sts:AssumeRole",
                            "Effect": "Allow",
                            "Principal": {
                                "Service": "ec2.amazonaws.com"
                            }
                        }
                    ],
                    "Version": "2012-10-17"
                },
                "Path": "/",
                "Policies": [
                    {
                        "PolicyDocument": {
                            "Statement": [
                                {
                                    "Action": [
                                        "ec2:CreateNetworkInterface",
                                        "ec2:DescribeInstances",
                                        "ec2:ModifyNetworkInterfaceAttribute",
                                        "ec2:AttachNetworkInterface",
                                        "ec2:DescribeSubnets",
                                        "ec2:DescribeSecurityGroups",
                                        "ec2:DescribeTags"
                                    ],
                                    "Effect": "Allow",
                                    "Resource": "*"
                                }
                            ],
                            "Version": "2012-10-17"
                        },
                        "PolicyName": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "EC2IfacePolicy"
                                ]
                            ]
                        }
                    }
                ],
                "RoleName": {
                    "Fn::Join": [
                        "-",
                        [
                            {
                                "Ref": "AWS::StackName"
                            },
                            "EC2IfaceRole"
                        ]
                    ]
                }
            },
            "Type": "AWS::IAM::Role"
        },
        "EC2InstanceProfile": {
            "DependsOn": "EC2IfaceRole",
            "Properties": {
                "Roles": [
                    {
                        "Ref": "EC2IfaceRole"
                    }
                ]
            },
            "Type": "AWS::IAM::InstanceProfile"
        },
        "CyPerfControllerProxy": {
            "DependsOn": [
                "proxyeth0",
                "EC2InstanceProfile"
            ],
            "Properties": {
                "BlockDeviceMappings": [
                    {
                        "DeviceName": "/dev/sda1",
                        "Ebs": {
                            "VolumeSize": "8",
                            "DeleteOnTermination" : true
                        }
                    }
                ],
                "IamInstanceProfile": {
                    "Ref": "EC2InstanceProfile"
                },
                "ImageId": { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMIxBROKER"] },
                "InstanceType": "c4.2xlarge",
                "KeyName": {
                    "Ref": "KeyNameForCyPerfAgent"
                },
                "NetworkInterfaces": [
                    {
                        "DeviceIndex": "0",
                        "NetworkInterfaceId": {
                            "Ref": "proxyeth0"
                        }
                    }
                ],
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "Controller Proxy"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::Instance"
        },
        "ClientAgent": {
            "DependsOn": [
                "clieth0",
                "clieth1",
                "CyPerfControllerProxy",
                "EC2InstanceProfile"
            ],
            "Properties": {
                "BlockDeviceMappings": [
                    {
                        "DeviceName": "/dev/sda1",
                        "Ebs": {
                            "VolumeSize": "8",
                            "DeleteOnTermination" : true
                        }
                    }
                ],
                "IamInstanceProfile": {
                    "Ref": "EC2InstanceProfile"
                },
                "ImageId": { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMIxAGENT"] },
                "InstanceType": {
                    "Ref": "InstanceTypeForCyPerfAgent"
                },
                "KeyName": {
                    "Ref": "KeyNameForCyPerfAgent"
                },
                "NetworkInterfaces": [
                    {
                        "DeviceIndex": "0",
                        "NetworkInterfaceId": {
                            "Ref": "clieth0"
                        }
                    },
                    {
                        "DeviceIndex": "1",
                        "NetworkInterfaceId": {
                            "Ref": "clieth1"
                        }
                    }
                ],
                "UserData": {
                    "Fn::Base64": {
                        "Fn::Join": [
                            "",
                            [
                                "#!/bin/bash -xe\n",
                                "cd /opt/keysight/tiger/active/bin/\n",
                                "sh /opt/keysight/tiger/active/bin/Appsec_init ",
                                {
                                    "Fn::Join": [
                                        "",
                                        [
                                            {
                                                "Fn::GetAtt": [
                                                    "CyPerfControllerProxy",
                                                    "PrivateIp"
                                                ]
                                            }
                                        ]
                                    ]
                                },
                                " >> /var/log/Appsec_init.log\n"
                            ]
                        ]
                    }
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "ClientAgent"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::Instance"
        },
        "ServerAgent": {
            "DependsOn": [
                "svreth0",
                "svreth1",
                "CyPerfControllerProxy",
                "EC2InstanceProfile"
            ],
            "Properties": {
                "BlockDeviceMappings": [
                    {
                        "DeviceName": "/dev/sda1",
                        "Ebs": {
                            "VolumeSize": "8",
                            "DeleteOnTermination" : true
                        }
                    }
                ],
                "IamInstanceProfile": {
                    "Ref": "EC2InstanceProfile"
                },
                "ImageId": { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMIxAGENT"] },
                "InstanceType": {
                    "Ref": "InstanceTypeForCyPerfAgent"
                },
                "KeyName": {
                    "Ref": "KeyNameForCyPerfAgent"
                },
                "NetworkInterfaces": [
                    {
                        "DeviceIndex": "0",
                        "NetworkInterfaceId": {
                            "Ref": "svreth0"
                        }
                    },
                    {
                        "DeviceIndex": "1",
                        "NetworkInterfaceId": {
                            "Ref": "svreth1"
                        }
                    }
                ],
                "UserData": {
                    "Fn::Base64": {
                        "Fn::Join": [
                            "",
                            [
                                "#!/bin/bash -xe\n",
                                "cd /opt/keysight/tiger/active/bin/\n",
                                "sh /opt/keysight/tiger/active/bin/Appsec_init ",
                                {
                                    "Fn::Join": [
                                        "",
                                        [
                                            {
                                                "Fn::GetAtt": [
                                                    "CyPerfControllerProxy",
                                                    "PrivateIp"
                                                ]
                                            }
                                        ]
                                    ]
                                },
                                " >> /var/log/Appsec_init.log\n"
                            ]
                        ]
                    }
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "ServerAgent"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::Instance"
        },
        "clieth0": {
            "Properties": {
                "Description": "Client Agent eth0/ens4",
                "GroupSet": [
                    {
                        "Ref": "AgentSecurityGroup"
                    }
                ],
                "SourceDestCheck": "true",
                "SubnetId": {
                    "Ref": "AgentControlSubnet"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "CA-Interface"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::NetworkInterface"
        },
        "clieth1": {
            "Properties": {
                "Description": "Client Agent eth1/ens5",
                "GroupSet": [
                    {
                        "Ref": "AgentSecurityGroup"
                    }
                ],
                "SourceDestCheck": "true",
                "SubnetId": {
                    "Ref": "AgentTestSubnet"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "CA-Interface"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::NetworkInterface"
        },
        "svreth0": {
            "Properties": {
                "Description": "Server Agent eth0/ens4",
                "GroupSet": [
                    {
                        "Ref": "AgentSecurityGroup"
                    }
                ],
                "SourceDestCheck": "true",
                "SubnetId": {
                    "Ref": "AgentControlSubnet"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "SA-Interface"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::NetworkInterface"
        },
        "svreth1": {
            "Properties": {
                "Description": "Server Agent eth1/ens5",
                "GroupSet": [
                    {
                        "Ref": "AgentSecurityGroup"
                    }
                ],
                "SourceDestCheck": "true",
                "SubnetId": {
                    "Ref": "AgentTestSubnet"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "SA-Interface"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::NetworkInterface"
        },
        "proxyeth0": {
            "Properties": {
                "Description": "Contoller proxy eth0",
                "GroupSet": [
                    {
                        "Ref": "CyPerfControllerProxySecurityGroup"
                    }
                ],
                "SourceDestCheck": "true",
                "SubnetId": {
                    "Ref": "ControllerProxyManagementSubnet"
                },
                "Tags": [
                    {
                        "Key": "Name",
                        "Value": {
                            "Fn::Join": [
                                "-",
                                [
                                    {
                                        "Ref": "AWS::StackName"
                                    },
                                    "MB-Interface"
                                ]
                            ]
                        }
                    },
                    {
                        "Key": "Project",
                        "Value": { "Ref": "Project" }
                    },
					{
						"Key": "Options",
						"Value": { "Fn::FindInMap" : [ "VariableMap", "global", "OPTIONSxTAG"] }
					},
                    {
                        "Key": "Owner",
                        "Value": { "Ref": "Username" }
                    }
                ]
            },
            "Type": "AWS::EC2::NetworkInterface"
        }
    }
}
